
# بهترین روش‌ها (Best Practices)

برای بهره‌وری حداکثری و جلوگیری از مشکلات در پروژه‌های بزرگ، رعایت نکات زیر توصیه می‌شود.

## ۱. مدیریت چرخه حیات (Lifecycle)

همیشه ویرایشگر را پاکسازی کنید. رها کردن ویرایشگر بدون `destroy` باعث می‌شود شنونده‌های رویداد (مثل `scroll` یا `resize` یا `selectionchange`) در حافظه باقی بمانند و در پس‌زمینه اجرا شوند که باعث کندی برنامه می‌شود.

```javascript
// ✅ صحیح
const editor = new DabirEditor('#app');
// ... استفاده ...
editor.destroy(); // پایان کار

// ❌ غلط
const editor = new DabirEditor('#app');
document.getElementById('#app').remove(); // المان حذف شد اما لیسنرها ماندند!
```

## ۲. مدیریت خطا در پلاگین‌ها

اگر پلاگین می‌نویسید، کدهای حساس خود را در بلوک `try-catch` قرار دهید، حتی اگر هسته ویرایشگر هم این کار را بکند. این کار باعث می‌شود بتوانید پیام‌های خطای دقیق‌تری لاگ کنید و تجربه کاربری بهتری بسازید.

## ۳. کلیدهای ذخیره‌سازی منحصر به فرد

اگر در یک صفحه چند ویرایشگر دارید، یا اگر کاربر چندین یادداشت مختلف دارد، حتماً از کلیدهای `storage.key` پویا و منحصر به فرد استفاده کنید.

```javascript
const noteId = 123;
new DabirEditor('#editor', {
    storage: {
        key: `note_content_${noteId}` // ✅ dabir-content-123
    }
});
```

## ۴. بازخورد به کاربر

از رویداد `change` برای نمایش وضعیت "ذخیره شد" به کاربر استفاده کنید.

```javascript
const statusEl = document.getElementById('status');
editor.on('change', () => {
    statusEl.textContent = 'ذخیره شد';
    setTimeout(() => statusEl.textContent = '', 2000);
});
```

## ۵. امنیت سمت سرور

هرگز فرض نکنید که محتوای ارسالی از سمت کلاینت امن است. با اینکه «دبیر» XSS را فیلتر می‌کند، اما یک مهاجم می‌تواند درخواست HTTP را مستقیماً دستکاری کند. همیشه در سمت سرور هم Sanitize انجام دهید.
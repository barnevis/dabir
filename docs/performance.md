# راهنمای عملکرد و بهینه‌سازی

ویرایشگر «دبیر» برای سرعت و سبکی طراحی شده است. در این نسخه، تمرکز ویژه‌ای بر **مدیریت حافظه** و جلوگیری از **Race Conditions** شده است.

## ۱. مدیریت اسناد بزرگ

برای اسناد بسیار طولانی:
-   محتوا را به بخش‌های کوچک‌تر تقسیم کنید.
-   ذخیره‌سازی خودکار (`autosave`) بهینه شده است و از `debounce` استفاده می‌کند، اما برای اسناد خیلی بزرگ ممکن است بخواهید زمان آن را افزایش دهید (نیاز به تغییر در کد منبع `InputHandler`).

## ۲. مدیریت حافظه (Memory Management) - بسیار مهم

یکی از مشکلات رایج در برنامه‌های وب مدرن (SPA)، نشت حافظه (Memory Leak) است. «دبیر» اکنون ابزارهای کاملی برای مدیریت این موضوع ارائه می‌دهد.

### آزادسازی منابع (`destroy`)
هر زمان که ویرایشگر از صفحه حذف می‌شود (مثلاً کاربر به صفحه دیگری می‌رود)، **باید** متد `destroy()` را فراخوانی کنید.

```javascript
// پاکسازی کامل
editor.destroy();
```

این متد کارهای زیر را انجام می‌دهد:
1.  حذف تمام `EventListener`ها از المان ویرایشگر و `document`.
2.  لغو تمام توابع `debounce` شده (جلوگیری از اجرای کد پس از حذف).
3.  پاکسازی ارجاعات به DOM برای اجازه به Garbage Collector.
4.  تخریب اصولی پلاگین‌ها.

## ۳. جلوگیری از Race Conditions

توابع داخلی ویرایشگر (مانند پارسر هوشمند یا ذخیره خودکار) که با تأخیر اجرا می‌شوند، اکنون دارای مکانیزم‌های محافظتی هستند. حتی اگر `destroy()` را صدا بزنید و یک تایمر هنوز فعال باشد، ویرایشگر متوجه شده و از اجرای کد روی المان حذف شده جلوگیری می‌کند.

## ۴. بهینه‌سازی رندر

ویرایشگر از `requestAnimationFrame` برای اعمال تغییرات سنگین DOM استفاده می‌کند تا فریم‌ریت مرورگر حفظ شود و رابط کاربری نرم باقی بماند.
